{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.fetchActiveTags = fetchActiveTags;\n  exports.sendTagIds = sendTagIds;\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  function mustGetGatewayUrl() {\n    const url = _expoVirtualEnv.env.EXPO_PUBLIC_GATEWAY_URL;\n    if (!url) throw new Error(\"Missing EXPO_PUBLIC_GATEWAY_URL in .env.local\");\n    return url.replace(/\\/$/, \"\");\n  }\n  async function mustOk(res) {\n    if (res.ok) return res;\n    let body = \"\";\n    try {\n      body = await res.text();\n    } catch {}\n    throw new Error(`Gateway error: ${res.status}${body ? ` - ${body}` : \"\"}`);\n  }\n  async function fetchActiveTags() {\n    const base = mustGetGatewayUrl();\n    const res = await mustOk(await fetch(`${base}/api/active-tags`));\n    return await res.json();\n  }\n  async function sendTagIds(tagIds) {\n    const base = mustGetGatewayUrl();\n    const res = await mustOk(await fetch(`${base}/api/reader/events`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        tagIds\n      })\n    }));\n    return await res.json();\n  }\n});","lineCount":41,"map":[[7,2,16,2,"exports"],[7,9,16,2],[7,10,16,2,"fetchActiveTags"],[7,25,16,2],[7,28,16,2,"fetchActiveTags"],[7,43,16,2],[8,2,22,2,"exports"],[8,9,22,2],[8,10,22,2,"sendTagIds"],[8,20,22,2],[8,23,22,2,"sendTagIds"],[8,33,22,2],[9,2,32,3],[9,6,32,3,"_expoVirtualEnv"],[9,21,32,3],[9,24,32,3,"require"],[9,31,32,3],[9,32,32,3,"_dependencyMap"],[9,46,32,3],[10,2,1,0],[10,11,1,9,"mustGetGatewayUrl"],[10,28,1,26,"mustGetGatewayUrl"],[10,29,1,26],[10,31,1,29],[11,4,2,4],[11,10,2,10,"url"],[11,13,2,13],[11,16,2,13,"_expoVirtualEnv"],[11,31,2,13],[11,32,2,13,"env"],[11,35,2,13],[11,36,2,13,"EXPO_PUBLIC_GATEWAY_URL"],[11,59,2,51],[12,4,3,4],[12,8,3,8],[12,9,3,9,"url"],[12,12,3,12],[12,14,3,14],[12,20,3,20],[12,24,3,24,"Error"],[12,29,3,29],[12,30,3,30],[12,77,3,77],[12,78,3,78],[13,4,4,4],[13,11,4,11,"url"],[13,14,4,14],[13,15,4,15,"replace"],[13,22,4,22],[13,23,4,23],[13,28,4,28],[13,30,4,30],[13,32,4,32],[13,33,4,33],[14,2,5,2],[15,2,7,2],[15,17,7,17,"mustOk"],[15,23,7,23,"mustOk"],[15,24,7,24,"res"],[15,27,7,27],[15,29,7,29],[16,4,8,4],[16,8,8,8,"res"],[16,11,8,11],[16,12,8,12,"ok"],[16,14,8,14],[16,16,8,16],[16,23,8,23,"res"],[16,26,8,26],[17,4,9,4],[17,8,9,8,"body"],[17,12,9,12],[17,15,9,15],[17,17,9,17],[18,4,10,4],[18,8,10,8],[19,6,11,6,"body"],[19,10,11,10],[19,13,11,13],[19,19,11,19,"res"],[19,22,11,22],[19,23,11,23,"text"],[19,27,11,27],[19,28,11,28],[19,29,11,29],[20,4,12,4],[20,5,12,5],[20,6,12,6],[20,12,12,12],[20,13,12,13],[21,4,13,4],[21,10,13,10],[21,14,13,14,"Error"],[21,19,13,19],[21,20,13,20],[21,38,13,38,"res"],[21,41,13,41],[21,42,13,42,"status"],[21,48,13,48],[21,51,13,51,"body"],[21,55,13,55],[21,58,13,58],[21,64,13,64,"body"],[21,68,13,68],[21,70,13,70],[21,73,13,73],[21,75,13,75],[21,77,13,77],[21,78,13,78],[22,2,14,2],[23,2,16,9],[23,17,16,24,"fetchActiveTags"],[23,32,16,39,"fetchActiveTags"],[23,33,16,39],[23,35,16,42],[24,4,17,4],[24,10,17,10,"base"],[24,14,17,14],[24,17,17,17,"mustGetGatewayUrl"],[24,34,17,34],[24,35,17,35],[24,36,17,36],[25,4,18,4],[25,10,18,10,"res"],[25,13,18,13],[25,16,18,16],[25,22,18,22,"mustOk"],[25,28,18,28],[25,29,18,29],[25,35,18,35,"fetch"],[25,40,18,40],[25,41,18,41],[25,44,18,44,"base"],[25,48,18,48],[25,66,18,66],[25,67,18,67],[25,68,18,68],[26,4,19,4],[26,11,19,11],[26,17,19,17,"res"],[26,20,19,20],[26,21,19,21,"json"],[26,25,19,25],[26,26,19,26],[26,27,19,27],[27,2,20,2],[28,2,22,9],[28,17,22,24,"sendTagIds"],[28,27,22,34,"sendTagIds"],[28,28,22,35,"tagIds"],[28,34,22,41],[28,36,22,43],[29,4,23,4],[29,10,23,10,"base"],[29,14,23,14],[29,17,23,17,"mustGetGatewayUrl"],[29,34,23,34],[29,35,23,35],[29,36,23,36],[30,4,24,4],[30,10,24,10,"res"],[30,13,24,13],[30,16,24,16],[30,22,24,22,"mustOk"],[30,28,24,28],[30,29,25,6],[30,35,25,12,"fetch"],[30,40,25,17],[30,41,25,18],[30,44,25,21,"base"],[30,48,25,25],[30,68,25,45],[30,70,25,47],[31,6,26,8,"method"],[31,12,26,14],[31,14,26,16],[31,20,26,22],[32,6,27,8,"headers"],[32,13,27,15],[32,15,27,17],[33,8,27,19],[33,22,27,33],[33,24,27,35],[34,6,27,54],[34,7,27,55],[35,6,28,8,"body"],[35,10,28,12],[35,12,28,14,"JSON"],[35,16,28,18],[35,17,28,19,"stringify"],[35,26,28,28],[35,27,28,29],[36,8,28,31,"tagIds"],[37,6,28,38],[37,7,28,39],[38,4,29,6],[38,5,29,7],[38,6,30,4],[38,7,30,5],[39,4,31,4],[39,11,31,11],[39,17,31,17,"res"],[39,20,31,20],[39,21,31,21,"json"],[39,25,31,25],[39,26,31,26],[39,27,31,27],[40,2,32,2],[41,0,32,3],[41,3]],"functionMap":{"names":["mustGetGatewayUrl","<global>","mustOk","fetchActiveTags","sendTagIds"],"mappings":"AAA;GCI;ECE;GDO;SEE;GFI;SGE"},"hasCjsExports":false},"type":"js/module"}]}